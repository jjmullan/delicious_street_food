# PR 생성 (4단계 프로세스)

다음 단계를 순차적으로 수행하여 PR을 생성합니다:

## 1단계: 변경사항 요약

먼저 현재 브랜치의 변경사항을 분석합니다:

1. `git status`로 현재 상태 확인
2. `git diff [base-branch]...HEAD`로 베이스 브랜치와의 차이점 확인
3. `git log [base-branch]..HEAD`로 커밋 히스토리 확인
4. 변경된 파일들을 Read 도구로 읽고 분석

변경사항을 다음 형식으로 요약하여 사용자에게 보여줍니다:

```
## 변경사항 요약

### 주요 변경사항
- [변경사항 1]
- [변경사항 2]
- [변경사항 3]

### 변경된 파일 (총 N개)
- path/to/file1.tsx: [변경 내용]
- path/to/file2.ts: [변경 내용]

### 커밋 히스토리
- [commit hash] [commit message]
- [commit hash] [commit message]
```

## 2단계: PR 템플릿에 맞게 내용 작성

프로젝트의 PR 템플릿(`/Users/yj/Gitbal/.github/PULL_REQUEST_TEMPLATE.md`)을 기반으로 내용을 작성합니다:

### PR 유형
변경사항을 분석하여 해당되는 항목에 자동으로 체크 표시를 합니다.

### PR 체크리스트
- 커밋 메시지 컨벤션 준수 여부 확인
- 테스트 수행 여부 확인

### PR 상세
변경사항을 상세하게 작성합니다:
- 무엇을 변경했는지
- 왜 변경했는지
- 어떻게 구현했는지
- 주의사항이 있다면 무엇인지

### 이슈 연결
브랜치명이나 커밋 메시지에서 이슈 번호를 추출하여 자동으로 연결합니다.

작성된 PR 템플릿 내용을 사용자에게 보여줍니다.

## 3단계: PR 전 사용자 확인 요청

AskUserQuestion 도구를 사용하여 다음을 확인합니다:

```
질문 1: "PR 내용을 확인하셨나요?"
옵션:
- "네, PR을 생성해주세요" (승인)
- "수정이 필요합니다" (수정 요청)

만약 "수정이 필요합니다"를 선택하면:
질문 2: "어떤 부분을 수정하시겠어요?"
옵션:
- "PR 제목 수정"
- "PR 설명 수정"
- "이슈 번호 수정"
- "직접 수정하겠습니다" (중단)
```

사용자가 수정을 원하면 해당 부분을 수정하고 다시 3단계로 돌아갑니다.

## 4단계: 확인 후 PR 생성

사용자가 승인하면 다음을 실행합니다:

1. 현재 브랜치가 원격 저장소에 푸시되어 있는지 확인
2. 푸시되지 않았다면 `git push -u origin [branch-name]` 실행
3. `gh pr create` 명령어로 PR 생성:
   ```bash
   gh pr create --title "[PR 제목]" --body "$(cat <<'EOF'
   [작성된 PR 템플릿 내용]
   EOF
   )"
   ```
4. PR 생성 완료 후 PR URL을 사용자에게 반환

## 중요 사항

- **절대로 사용자 확인 없이 PR을 생성하지 마세요**
- 각 단계마다 사용자에게 명확한 정보를 제공하세요
- 에러가 발생하면 사용자에게 알리고 해결 방법을 제시하세요
- PR 생성 전에 반드시 AskUserQuestion으로 최종 확인을 받으세요
- TodoWrite 도구를 사용하여 진행 상황을 추적하세요

## 실행 시작

위 4단계를 순차적으로 실행하되, 각 단계마다 사용자에게 결과를 보여주고 다음 단계로 진행합니다.
