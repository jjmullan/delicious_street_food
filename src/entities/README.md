
Q. FSD 아키텍처에서 entities 와 features 폴더의 레이어 구조는 거의 유사하게 되는 거 아닌가?
entities 는 제품 자체에 대한 정의고, features 는 동작에 대한 정의인데,
두 폴더 모두 재사용되는 컴포넌트를 정의한 거고, 단순 패칭에서 끝나는 핵심 데이터는 없을 것 같아서

A. **구조적으로는 비슷해 보일 수 있지만, '책임(Responsibility)'과 '결합도(Coupling)' 측면에서 엄격한 차이**가 있습니다.

---

### 1. Entities vs. Features: 핵심 차이점

질문하신 대로 두 레이어 모두 재사용 가능한 컴포넌트와 로직을 담지만, 그 목적이 다릅니다.

| 구분 | Entities (비즈니스 엔티티) | Features (사용자 시나리오) |
| --- | --- | --- |
| **정의** | 비즈니스 모델의 **실체** (User, Product, Order) | 사용자가 수행하는 **동작/기능** (Add To Cart, Login) |
| **관점** | "이 데이터는 무엇인가?" | "사용자가 무엇을 하려고 하는가?" |
| **종속성** | 다른 엔티티나 피처를 참조할 수 없음 (**고립**) | 엔티티를 참조하여 기능을 완성함 |
| **예시** | 사용자 카드, 제품 상세 카드, 가격 정보 | 장바구니 담기 버튼, 검색 필터링 로직 |

---

### 2. 왜 비슷하게 느껴질까요?

단순한 CRUD 위주의 서비스라면 말씀하신 대로 **"단순 패칭에서 끝나는 데이터"**가 많기 때문에 두 레이어가 거의 중복처럼 느껴질 수 있습니다.

* **Entities:** `ProductCard` (제품 정보를 보여줌)
* **Features:** `AddToWishlist` (제품을 찜 목록에 추가하는 버튼)

만약 `ProductCard` 안에 '찜하기 버튼'이 이미 포함되어 있다면, 사실상 엔티티가 피처의 역할까지 수행하는 셈이 되어 구조가 모호해집니다.

---

### 3. 레이어를 분리해야 하는 결정적 이유

#### ① 비즈니스 로직의 파편화 방지

`Entities`는 비즈니스의 **"최소 단위"**입니다. 예를 들어, '사용자 정보'는 마이페이지, 게시글 작성자 정보, 결제 페이지 등 어디서든 쓰입니다. 이 '사용자'라는 개념 자체를 정의하는 것이 Entities입니다. 반면 `Features`는 그 사용자가 '정보를 수정'하거나 '회원 탈퇴'를 하는 등의 **상호작용**에 집중합니다.

#### ② 상위 레이어(Features)는 하위 레이어(Entities)를 조합함

FSD의 핵심 규칙 중 하나는 **"상위 레이어는 하위 레이어를 알 수 있지만, 하위 레이어는 상위 레이어를 몰라야 한다"**는 것입니다.

* **Entities (Product):** 상품의 이름, 가격, 이미지만 렌더링합니다. (순수함)
* **Features (BuyProduct):** 상품 엔티티를 가져와서 그 옆에 '구매하기' 버튼을 붙이고 결제 로직을 연결합니다.

이렇게 분리하면, 똑같은 `Product` 엔티티를 가지고 어떤 페이지에서는 '구매하기' 기능을 붙이고, 다른 페이지에서는 '삭제하기' 기능을 붙이는 식의 **조립(Composition)**이 가능해집니다.

---

### 4. 실무적인 구분 팁

만약 특정 컴포넌트를 어디에 둘지 고민된다면 다음 질문을 던져보세요.

> **"이 컴포넌트에서 API 호출(Action)을 제거했을 때, 데이터의 형태만 남는가?"**

* **YES:** 데이터 모델에 종속된 것이므로 `Entities`입니다.
* **NO (동작이 핵심):** 비즈니스 가치를 만드는 기능이므로 `Features`입니다.

단순한 프로젝트라면 초기에는 `Entities` 위주로 구성하다가, 특정 기능(동작)이 복잡해지거나 여러 곳에서 다른 방식으로 재사용될 때 `Features`로 추출하는 전략을 취하기도 합니다.
